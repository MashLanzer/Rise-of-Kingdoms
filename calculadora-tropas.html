<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Entrenamiento - RoK Academy</title>
    <meta name="description"
        content="Calcula cu√°ntas tropas puedes entrenar y cu√°nto poder ganar√°s en Rise of Kingdoms. Optimiza tus aceleradores para el MGE.">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">RoK Academy</a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="index.html">Inicio</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle">Gu√≠as Principales</a>
                        <ul class="dropdown-menu">
                            <li><a href="civilizaciones.html">Civilizaciones</a></li>
                            <li><a href="comandantes.html">Comandantes</a></li>
                            <li><a href="builds.html">√Årboles de Talentos</a></li>
                            <li><a href="tier-lists.html">Tier Lists</a></li>
                            <li><a href="equipment.html">Equipment</a></li>
                            <li><a href="vip.html">VIP</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle">Sistemas</a>
                        <ul class="dropdown-menu">
                            <li><a href="osiris.html">Arca de Osiris</a></li>
                            <li><a href="armamentos.html">Armamentos y Formaciones</a></li>
                            <li><a href="edificios.html">Edificios</a></li>
                            <li><a href="tropas.html">Tropas</a></li>
                            <li><a href="alianzas.html">Alianzas</a></li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a class="dropdown-toggle">Herramientas</a>
                        <ul class="dropdown-menu">
                            <li><a href="calculadora-tropas.html" class="active">ü™ñ Calculadora Tropas</a></li>
                            <li><a href="calculadora-aceleradores.html">üßÆ Calculadora Speedups</a></li>
                            <li><a href="calculadora.html">‚öñÔ∏è Calculadora Recursos</a></li>
                            <li><a href="comparador.html">‚öñÔ∏è Comparador</a></li>
                        </ul>
                    </li>
                    <li><button class="search-btn" id="globalSearchBtn">üîç Buscar</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero calc-hero">
            <div class="hero-content">
                <span class="badge badge-legendary">POWER TRACKER</span>
                <h1>ü™ñ Calculadora de Entrenamiento</h1>
                <p>Calcula el crecimiento de tu ej√©rcito y el poder generado para eventos como el MGE.</p>
            </div>
        </section>

        <div class="container">
            <div class="calculator-layout">
                <!-- Inputs -->
                <div class="calc-panel glass-card">
                    <h3>Configuraci√≥n de Tropa</h3>

                    <div class="form-group">
                        <label>Nivel de Tropa (Tier)</label>
                        <select id="troopTier" class="calc-input">
                            <option value="1">T1 (Poder: 1)</option>
                            <option value="2">T2 (Poder: 2)</option>
                            <option value="3">T3 (Poder: 3)</option>
                            <option value="4" selected>T4 (Poder: 4)</option>
                            <option value="5">T5 (Poder: 10)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tiempo por Lote (HH:MM:SS)</label>
                        <div class="time-inputs">
                            <input type="number" id="batchHours" placeholder="Horas" min="0" value="20"
                                class="calc-input">
                            <input type="number" id="batchMins" placeholder="Min" min="0" max="59" value="0"
                                class="calc-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tropas por Lote</label>
                        <input type="number" id="batchSize" value="2000" class="calc-input">
                    </div>

                    <hr class="divider">

                    <h3>Tus Aceleradores</h3>
                    <div class="speedup-grid">
                        <div class="speedup-input-item">
                            <label>1 min</label>
                            <input type="number" class="speed-val" data-min="1" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>5 min</label>
                            <input type="number" class="speed-val" data-min="5" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>15 min</label>
                            <input type="number" class="speed-val" data-min="15" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>1 h</label>
                            <input type="number" class="speed-val" data-min="60" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>3 h</label>
                            <input type="number" class="speed-val" data-min="180" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>8 h</label>
                            <input type="number" class="speed-val" data-min="480" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>15 h</label>
                            <input type="number" class="speed-val" data-min="900" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>24 h</label>
                            <input type="number" class="speed-val" data-min="1440" value="0">
                        </div>
                        <div class="speedup-input-item">
                            <label>3 d</label>
                            <input type="number" class="speed-val" data-min="4320" value="0">
                        </div>
                    </div>

                    <button class="btn btn-primary w-100" id="btnCalcular">Calcular Ej√©rcito</button>
                </div>

                <!-- Results -->
                <div class="results-panel">
                    <div class="result-card highlight">
                        <h4>Tropas Totales a Entrenar</h4>
                        <span class="main-result" id="resTropas">0</span>
                    </div>

                    <div class="stats-mini-grid">
                        <div class="stat-box">
                            <label>Poder Ganado</label>
                            <span id="resPoder">0</span>
                        </div>
                        <div class="stat-box">
                            <label>Lotes Completos</label>
                            <span id="resLotes">0</span>
                        </div>
                        <div class="stat-box">
                            <label>Tiempo Total (min)</label>
                            <span id="resMinTotal">0</span>
                        </div>
                    </div>

                    <div class="mge-box glass-card">
                        <h3>Puntos de MGE Estimados</h3>
                        <p>Basado en los puntos est√°ndar de entrenamiento (T4 = 40 pts, T5 = 100 pts).</p>
                        <div class="mge-puntos" id="resMGE">0 pts</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <p><strong>RoK Academy - Logistics Div</strong></p>
            <p>Optimizaci√≥n t√°ctica para el crecimiento de poder.</p>
        </div>
    </footer>

    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-modal-content">
            <div class="search-modal-header">
                <input type="text" class="search-input" id="globalSearchInput" placeholder="Buscar herramientas...">
                <button class="close-search" id="closeSearch">‚úï</button>
            </div>
            <div id="searchResults"></div>
        </div>
    </div>

    <script src="search.js"></script>
    <script src="script.js"></script>

    <script>
        document.getElementById('btnCalcular').addEventListener('click', function () {
            const tier = parseInt(document.getElementById('troopTier').value);
            const batchHours = parseInt(document.getElementById('batchHours').value) || 0;
            const batchMins = parseInt(document.getElementById('batchMins').value) || 0;
            const batchSize = parseInt(document.getElementById('batchSize').value) || 0;

            const batchTimeInMin = (batchHours * 60) + batchMins;

            // Sumar aceleradores
            let totalMin = 0;
            document.querySelectorAll('.speed-val').forEach(input => {
                const val = parseInt(input.value) || 0;
                const factor = parseInt(input.getAttribute('data-min'));
                totalMin += (val * factor);
            });

            if (batchTimeInMin <= 0 || batchSize <= 0) {
                alert("Por favor, introduce el tiempo y tama√±o del lote correctamente.");
                return;
            }

            const lotes = Math.floor(totalMin / batchTimeInMin);
            const tropasTotales = lotes * batchSize;

            // Poder por tier: T1=1, T2=2, T3=3, T4=4, T5=10
            const poderMap = { 1: 1, 2: 2, 3: 3, 4: 4, 5: 10 };
            const poderGanado = tropasTotales * poderMap[tier];

            // Puntos MGE (Estimado aproximado: T4=40, T5=100 por tropa)
            const mgeMap = { 1: 2, 2: 4, 3: 10, 4: 40, 5: 100 };
            const puntosMGE = tropasTotales * mgeMap[tier];

            // Mostrar resultados
            document.getElementById('resTropas').textContent = tropasTotales.toLocaleString();
            document.getElementById('resPoder').textContent = "+" + poderGanado.toLocaleString();
            document.getElementById('resLotes').textContent = lotes.toLocaleString();
            document.getElementById('resMinTotal').textContent = totalMin.toLocaleString();
            document.getElementById('resMGE').textContent = puntosMGE.toLocaleString() + " pts";

            // Animaci√≥n simple
            const panel = document.querySelector('.results-panel');
            panel.style.opacity = '0';
            setTimeout(() => {
                panel.style.opacity = '1';
                panel.style.transition = 'opacity 0.5s ease-in-out';
            }, 50);
        });
    </script>

    <style>
        .calculator-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .calc-panel {
            padding: 2rem;
        }

        .calc-input {
            width: 100%;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--navy-border);
            color: white;
            border-radius: 6px;
            margin-top: 0.5rem;
        }

        .time-inputs {
            display: flex;
            gap: 1rem;
        }

        .speedup-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .speedup-input-item label {
            font-size: 0.75rem;
            color: var(--gold-light);
            display: block;
        }

        .speedup-input-item input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--navy-border);
            color: white;
            padding: 0.4rem;
            border-radius: 4px;
        }

        .results-panel {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .result-card.highlight {
            background: linear-gradient(135deg, var(--gold-primary) 0%, #b8860b 100%);
            padding: 2.5rem;
            border-radius: 12px;
            text-align: center;
            color: var(--navy-900);
        }

        .result-card h4 {
            margin: 0;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .main-result {
            font-size: 4rem;
            font-weight: 900;
            display: block;
            margin-top: 0.5rem;
        }

        .stats-mini-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .stat-box {
            background: var(--navy-800);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--navy-border);
        }

        .stat-box label {
            font-size: 0.7rem;
            color: var(--text-medium);
            display: block;
        }

        .stat-box span {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--gold-primary);
        }

        .mge-box {
            padding: 2rem;
            text-align: center;
            border-top: 3px solid #f5576c;
        }

        .mge-puntos {
            font-size: 2.5rem;
            font-weight: 900;
            color: #f5576c;
            margin-top: 1rem;
            text-shadow: 0 0 15px rgba(245, 87, 108, 0.3);
        }

        .divider {
            border: 0;
            border-top: 1px solid var(--navy-border);
            margin: 2rem 0;
        }

        @media (max-width: 900px) {
            .calculator-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>

</html>